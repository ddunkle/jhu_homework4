<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Quiz</title>

    <!-- Added link to the jQuery Library and external js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Added a link to Bootstrap and external CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="./Assets/css/style.css">
</head>

<body>

    <div class="jumbotron">
        <header class="text-right" id="timer">Time:</header>
        <h1 class="text-center">Coding Quiz</h1>
        <h3 class="text-center margin-50">There are 10 questions. You have 75 seconds to complete the quiz. Each wrong
            choice will cost you 10 seconds.</h3>
    </div>

    <div class="container">

        <div class="row">
            <div class="col-md-12">
                <div class="card mb-2">
                    <h3 class="card-header">Question</h3>
                    <div class="card-body text-center">
                        <h4 id="question"></h4>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card mb-2">
                    <h3 class="card-header">Choices</h3>
                    <div class="card-body text-left">
                        <div class="row">
                            <div class="col-md-12">
                                <button id="choice-a" class="btn btn-primary btn-choice" value="a">
                                    <h1></h1>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button id="choice-b" class="btn btn-primary btn-choice" value="b">
                                    <h1></h1>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button id="choice-c" class="btn btn-primary btn-choice" value="c">
                                    <h1></h1>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button id="choice-d" class="btn btn-primary btn-choice" value="d">
                                    <h1></h1>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card mb-2">
                    <h3 class="card-header">Result</h3>
                    <div class="card-body text-center">
                        <h4 id="result"></h4>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        $(document).ready(function () {

            var qCount = 0;
            var qTotal = 10; 
            var correct = 0;
            var timeLeft = 75;
            var finalTime;
            var questions = [
                {
                    title: "This is question 1",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                }, 
                {
                    title: "This is question 2",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 3",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 4",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 5",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 6",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 7",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 8",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 9",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                },
                {
                    title: "This is question 10",
                    choices: ["A", "B", "C", "D"],
                    answer: "a"
                }
            ]
            printQuestions(qCount);
            $("#timer").text("Time left: " + timeLeft);
            setTime();
            


            $(".btn-choice").on("click", function () {
                var userChoice = $(this).val();
                if (userChoice === questions[qCount].answer) {
                    $("#result").text("Correct");
                    qCount++;
                    if (qCount < qTotal) {
                        printQuestions(qCount);
                    } else {
                        finalTime = timeLeft;
                        showResults(); 
                    }                    
                } else {
                    timeLeft = timeLeft - 10;
                    $("#result").text("Sorry, try again.");
                    //$("#timer").text("Time left: " + timeLeft);
                }
            });

            
            function printQuestions(qNum) {
                $("#question").text(questions[qNum].title);
                $("#choice-a").text(questions[qNum].choices[0]);
                $("#choice-b").text(questions[qNum].choices[1]);
                $("#choice-c").text(questions[qNum].choices[2]);
                $("#choice-d").text(questions[qNum].choices[3]);
            }
            function setTime() {
                var timerInterval = setInterval(function() {
                    timeLeft--;
                    $("#timer").text("Time left: " + timeLeft);

                    if (timeLeft <= 0) {
                        finalTime = 0;
                        clearInterval(timerInterval);
                        showResults();
                    }
                }, 1000);
            }
            function showResults() {
                console.log("This is the end");
                console.log("You completed this in: " + (75 - finalTime) + " seconds.")
                console.log("You successfully completed " + (qCount + 1) + " questions.")
            }
        });


    </script>

</body>

</html>